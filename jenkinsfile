pipeline {
    agent any
    stages {
         stage('Clone Repository'){
            steps{
              git 'https://github.com/developwithvikas/devops.git'
}}

stage('Build Docker Image'){
steps{
Script{
//bulids the dicker image and tags it
sh "docker built -t devops-assign-2 ."
}
}
}
stage ('Run Docker Container'){
steps{
script{
//stops and removes any existing container with he same 
sh "docker stop my-web-app || true"
sh "docker rm my-web-app || true"

//runs a new container, mapping port 8080 on the host to port 80 in the container


sh "docker run -d --name my-web-app -p 8080 :80 devops-assign-2"
